---
import Layout from './Layout.astro';
import { format } from 'date-fns';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
  author: string;
  image?: string;
  tags: string[];
}

const { title, description, pubDate, updatedDate, author, image, tags } = Astro.props;
---

<Layout title={`${title} | AstroBlog`} description={description} image={image}>
  <article class="container mx-auto px-4 py-12">
    <div class="max-w-3xl mx-auto">
      <header class="mb-8">
        {image && (
          <div class="mb-8 rounded-xl overflow-hidden">
            <img 
              src={image} 
              alt={title}
              class="w-full h-auto object-cover" 
              transition:name={`image-${pubDate.getTime()}`}
            />
          </div>
        )}
        
        <div class="flex flex-wrap gap-2 mb-4">
          {tags.map(tag => (
            <span class="inline-block px-3 py-1 text-xs bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 rounded-full">
              {tag}
            </span>
          ))}
        </div>
        
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-serif font-bold text-gray-900 dark:text-white mb-4"
          transition:name={`title-${pubDate.getTime()}`}>
          {title}
        </h1>
        
        <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-4">
          <span transition:name={`date-${pubDate.getTime()}`}>{format(pubDate, 'MMMM d, yyyy')}</span>
          <span class="mx-2">â€¢</span>
          <span>{author}</span>
          {updatedDate && (
            <div class="ml-4 italic">
              Last updated on {format(updatedDate, 'MMMM d, yyyy')}
            </div>
          )}
        </div>
        
        <p class="text-xl text-gray-600 dark:text-gray-300 mb-8" transition:name={`desc-${pubDate.getTime()}`}>
          {description}
        </p>
      </header>
      
      <div class="prose dark:prose-invert prose-lg max-w-none">
        <slot />
      </div>
    </div>
  </article>
</Layout>

<style is:global>
  /* Additional styles for blog content */
  .prose {
    @apply text-gray-800 dark:text-gray-200;
  }
  
  .prose h2 {
    @apply text-2xl font-serif font-bold mt-8 mb-4;
  }
  
  .prose h3 {
    @apply text-xl font-serif font-bold mt-6 mb-3;
  }
  
  .prose p {
    @apply mb-6 leading-relaxed;
  }
  
  .prose a {
    @apply text-primary-600 dark:text-primary-400 underline decoration-primary-200 dark:decoration-primary-800 underline-offset-2 hover:text-primary-700 dark:hover:text-primary-300 transition-colors duration-200;
  }
  
  .prose blockquote {
    @apply border-l-4 border-primary-300 dark:border-primary-700 pl-4 italic;
  }
  
  .prose ul, .prose ol {
    @apply mb-6 pl-6;
  }
  
  .prose ul {
    @apply list-disc;
  }
  
  .prose ol {
    @apply list-decimal;
  }
  
  .prose li {
    @apply mb-2;
  }
  
  .prose img {
    @apply rounded-lg shadow-md my-8 mx-auto;
  }
  
  .prose code {
    @apply px-1.5 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-sm;
  }
  
  .prose pre {
    @apply p-4 bg-gray-900 dark:bg-gray-800 rounded-lg overflow-x-auto my-6;
  }
  
  .prose pre code {
    @apply bg-transparent p-0 text-gray-200;
  }
</style>